var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)};define("scribe/plugins/core/set-root-p-element",["require","exports"],function(require,exports){"use strict";return function(scribe){""===scribe.getHTML().trim()&&scribe.setContent("<p><br></p>")}}),define("scribe/util",["require","exports"],function(require,exports){"use strict";function removeValue(array,value){for(var i;i=array.indexOf(value),-1!==i;)array.splice(i,1)}function toArray(values){for(var a=[],i=0;i<values.length;i++)a.push(values.item(i));return a}function some(values,predicate){for(var i=0;i<values.length;i++)if(predicate(values.item(i)))return!0;return!1}function merge(){function patch(target,source){for(var p in source)source.hasOwnProperty(p)&&(target[p]="object"!=typeof source[p]||null===source[p]||source[p]instanceof Array?source[p]:merge(target[p],source[p]));return target}for(var objects=[],_i=0;_i<arguments.length;_i++)objects[_i-0]=arguments[_i];for(var result={},i=0;i<objects.length;i++)patch(result,objects[i]);return result}exports.removeValue=removeValue,exports.toArray=toArray,exports.some=some,exports.merge=merge}),define("scribe/constants",["require","exports"],function(require,exports){"use strict";exports.blockElementNames=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO"],exports.inlineElementNames=["B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA"]}),define("scribe/node",["require","exports","scribe/constants","scribe/util"],function(require,exports,constants_1,util_1){"use strict";function isBlockElement(node){return-1!==constants_1.blockElementNames.indexOf(node.nodeName)}function isInlineElement(node){return-1!==constants_1.inlineElementNames.indexOf(node.nodeName)}function isHTMLElement(node){return node.nodeType===Node.ELEMENT_NODE}function hasContent(node){return node&&node.children&&node.children.length>0?!0:!(!node||"BR"!==node.nodeName)}function isEmptyInlineElement(node){return isHTMLElement(node)?node.children.length>1?!1:1===node.children.length&&""!==node.textContent.trim()?!1:0===node.children.length?""===node.textContent.trim():isEmptyInlineElement(node.children[0]):!1}function isText(node){return node.nodeType===Node.TEXT_NODE}function isEmptyTextNode(node){return isText(node)&&""===node.data}function isFragment(node){return node.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function isBefore(node1,node2){return node1.compareDocumentPosition(node2)&Node.DOCUMENT_POSITION_FOLLOWING}function elementHasClass(node,className){return isHTMLElement(node)&&node.className===className}function isSelectionMarkerNode(node){return elementHasClass(node,"scribe-marker")}function isCaretPositionNode(node){return elementHasClass(node,"caret-position")}function isWhitespaceOnlyTextNode(node){return node.nodeType===Node.TEXT_NODE&&/^\s*$/.test(node.nodeValue)}function firstDeepestChild(node){var fs=node.firstChild;return fs&&"BR"!==fs.nodeName?firstDeepestChild(fs):node}function insertAfter(newNode,referenceNode){return referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)}function removeNode(node){return node.parentNode.removeChild(node)}function getAncestor(node,rootElement,nodeFilter){function isTopContainerElement(element){return rootElement===element}if(!isTopContainerElement(node))for(var currentNode=node.parentNode;currentNode&&!isTopContainerElement(currentNode);){if(nodeFilter(currentNode))return currentNode;currentNode=currentNode.parentNode}}function nextSiblings(node){for(var all=[];node=node.nextSibling;)all.push(node);return all}function wrap(nodes,parentNode){nodes[0].parentNode.insertBefore(parentNode,nodes[0]);for(var i=0;i<nodes.length;i++)parentNode.appendChild(nodes[i]);return parentNode}function unwrap(node,childNode){for(;childNode.childNodes.length>0;)node.insertBefore(childNode.childNodes[0],childNode);node.removeChild(childNode)}function wrapChildNodes(parentNode){var index=0;util_1.toArray(parentNode.childNodes).filter(function(node){return!isWhitespaceOnlyTextNode(node)}).filter(function(node){return node.nodeType===Node.TEXT_NODE||!isBlockElement(node)}).reduce(function(result,node,key,list){return index+=0===key||node.previousSibling===list[key-1]?0:1,result[index]?result[index].push(node):result[index]=[node],result},[]).forEach(function(nodeGroup){wrap(nodeGroup,document.createElement("p"))})}function removeChromeArtifacts(parentElement){if(isHTMLElement(parentElement)){for(var nodes=util_1.toArray(parentElement.querySelectorAll(inlineElementSelector)).filter(function(el){return isInlineWithStyle(window.getComputedStyle(parentElement),el)}),emptySpans=[],_i=0,nodes_1=nodes;_i<nodes_1.length;_i++){var node=nodes_1[_i];node.style.lineHeight=null,node.getAttribute("style")||node.removeAttribute("style"),"SPAN"===node.nodeName&&0===node.attributes.length&&emptySpans.push(node)}for(var _a=0,emptySpans_1=emptySpans;_a<emptySpans_1.length;_a++){var node=emptySpans_1[_a];unwrap(node.parentNode,node)}}}function isInlineWithStyle(parentStyle,element){return window.getComputedStyle(element).lineHeight===parentStyle.lineHeight}var inlineElementSelector=constants_1.inlineElementNames.map(function(elName){return elName+'[style*="line-height"]'}).join(",");exports.isBlockElement=isBlockElement,exports.isInlineElement=isInlineElement,exports.isHTMLElement=isHTMLElement,exports.hasContent=hasContent,exports.isEmptyInlineElement=isEmptyInlineElement,exports.isText=isText,exports.isEmptyTextNode=isEmptyTextNode,exports.isFragment=isFragment,exports.isBefore=isBefore,exports.isSelectionMarkerNode=isSelectionMarkerNode,exports.isCaretPositionNode=isCaretPositionNode,exports.isWhitespaceOnlyTextNode=isWhitespaceOnlyTextNode,exports.firstDeepestChild=firstDeepestChild,exports.insertAfter=insertAfter,exports.removeNode=removeNode,exports.getAncestor=getAncestor,exports.nextSiblings=nextSiblings,exports.wrap=wrap,exports.unwrap=unwrap,exports.wrapChildNodes=wrapChildNodes,exports.removeChromeArtifacts=removeChromeArtifacts}),define("scribe/plugins/core/formatters/html/enforce-p-elements",["require","exports","scribe/node"],function(require,exports,nodeHelpers){"use strict";return function(scribe){function traverse(parentNode){for(var node,i=0;node=parentNode.children[i++];)"BLOCKQUOTE"===node.tagName&&nodeHelpers.wrapChildNodes(node)}scribe.registerHTMLFormatter("normalize",function(html){var bin=document.createElement("div");return bin.innerHTML=html,nodeHelpers.wrapChildNodes(bin),traverse(bin),bin.innerHTML})}}),define("scribe/plugins/core/formatters/html/ensure-selectable-containers",["require","exports","scribe/node"],function(require,exports,nodeHelpers){"use strict";function parentHasNoTextContent(node){return nodeHelpers.isCaretPositionNode(node)?!0:""===node.parentNode.textContent.trim()}function traverse(parentNode){function isEmpty(node){return 0===node.children.length&&nodeHelpers.isBlockElement(node)||1===node.children.length&&nodeHelpers.isSelectionMarkerNode(node.children[0])?!0:nodeHelpers.isBlockElement(node)||0!==node.children.length?!1:parentHasNoTextContent(node)}for(var node=parentNode.firstElementChild;node;)nodeHelpers.isSelectionMarkerNode(node)||(isEmpty(node)&&""===node.textContent.trim()&&-1===html5VoidElements.indexOf(node.nodeName)?node.appendChild(document.createElement("br")):node.children.length>0&&traverse(node)),node=node.nextElementSibling}var html5VoidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];return function(scribe){scribe.registerHTMLFormatter("normalize",function(html){var bin=document.createElement("div");return bin.innerHTML=html,traverse(bin),bin.innerHTML})}}),define("scribe/plugins/core/inline-elements-mode",["require","exports","scribe/node"],function(require,exports,node){"use strict";function hasContent(rootNode){for(var treeWalker=document.createTreeWalker(rootNode,NodeFilter.SHOW_ALL,null,!1);treeWalker.nextNode();)if(treeWalker.currentNode&&node.hasContent(treeWalker.currentNode))return!0;return!1}var ENTER=13;return function(scribe){scribe.el.addEventListener("keydown",function(event){if(event.keyCode===ENTER){var selection=new scribe.api.Selection,range=selection.range,blockNode=selection.getContaining(function(node){return"LI"===node.nodeName||/^(H[1-6])$/.test(node.nodeName)});blockNode||(event.preventDefault(),scribe.transactionManager.run(function(){"BR"===scribe.el.lastChild.nodeName&&scribe.el.removeChild(scribe.el.lastChild);var brNode=document.createElement("br");range.insertNode(brNode),range.collapse(!1);var contentToEndRange=range.cloneRange();contentToEndRange.setEndAfter(scribe.el.lastChild);var contentToEndFragment=contentToEndRange.cloneContents();if(!hasContent(contentToEndFragment)){var bogusBrNode=document.createElement("br");range.insertNode(bogusBrNode)}var newRange=range.cloneRange();newRange.setStartAfter(brNode),newRange.setEndAfter(brNode),selection.selection.removeAllRanges(),selection.selection.addRange(newRange)}))}}),""===scribe.getHTML().trim()&&scribe.setContent("")}}),define("scribe/plugins/core/plugins",["require","exports","scribe/plugins/core/set-root-p-element","scribe/plugins/core/formatters/html/enforce-p-elements","scribe/plugins/core/formatters/html/ensure-selectable-containers","scribe/plugins/core/inline-elements-mode"],function(require,exports,setRootPElement,enforcePElements,ensureSelectableContainers,inlineElementsMode){"use strict";exports.setRootPElement=setRootPElement,exports.enforcePElements=enforcePElements,exports.ensureSelectableContainers=ensureSelectableContainers,exports.inlineElementsMode=inlineElementsMode}),define("scribe/api/command-patch",["require","exports"],function(require,exports){"use strict";var CommandPatch=function(){function CommandPatch(scribe,commandName){this.scribe=scribe,this.commandName=commandName}return CommandPatch.prototype.execute=function(value){var _this=this;this.scribe.transactionManager.run(function(){document.execCommand(_this.commandName,!1,value||null)})},CommandPatch.prototype.queryState=function(){return document.queryCommandState(this.commandName)},CommandPatch.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},CommandPatch}();exports.CommandPatch=CommandPatch}),define("scribe/api/command",["require","exports"],function(require,exports){"use strict";var Command=function(){function Command(scribe,commandName){this.scribe=scribe,this.commandName=commandName}return Object.defineProperty(Command.prototype,"patch",{get:function(){return this.scribe.commandPatches[this.commandName]},enumerable:!0,configurable:!0}),Command.prototype.execute=function(value){var _this=this;this.patch?this.patch.execute(value):this.scribe.transactionManager.run(function(){document.execCommand(_this.commandName,!1,value||null)})},Command.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},Command.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},Command}();exports.Command=Command}),define("scribe/plugins/core/commands/indent",["require","exports","scribe/api/command"],function(require,exports,command_1){"use strict";var IndentCommand=function(_super){function IndentCommand(scribe){_super.call(this,scribe,"indent")}return __extends(IndentCommand,_super),IndentCommand.prototype.queryEnabled=function(){var selection=new this.scribe.api.Selection,listElement=selection.getContaining(function(element){return"UL"===element.nodeName||"OL"===element.nodeName});return _super.prototype.queryEnabled.call(this)&&this.scribe.allowsBlockElements()&&!listElement},IndentCommand}(command_1.Command);return function(scribe){scribe.commands.indent=new IndentCommand(scribe)}}),define("scribe/plugins/core/commands/insert-list",["require","exports","scribe/api/command","scribe/node","scribe/util"],function(require,exports,command_2,nodeHelpers,util_2){"use strict";var InsertListCommand=function(_super){function InsertListCommand(){_super.apply(this,arguments)}return __extends(InsertListCommand,_super),InsertListCommand.prototype.execute=function(value){function splitList(listItemElements){if(listItemElements.length){for(var newListNode=document.createElement(listNode.nodeName);listItemElements.length>0;)newListNode.appendChild(listItemElements[0]),listItemElements.shift();listNode.parentNode.insertBefore(newListNode,listNode.nextElementSibling)}}if(this.queryState()){var selection=new this.scribe.api.Selection,range=selection.range,listNode=selection.getContaining(function(node){return"OL"===node.nodeName||"UL"===node.nodeName}),listItemElement=selection.getContaining(function(node){return"LI"===node.nodeName});this.scribe.transactionManager.run(function(){if(listItemElement){var nextListItemElements=nodeHelpers.nextSiblings(listItemElement);splitList(nextListItemElements),selection.placeMarkers();var pNode=document.createElement("p");pNode.innerHTML=listItemElement.innerHTML,listNode.parentNode.insertBefore(pNode,listNode.nextElementSibling),listItemElement.parentNode.removeChild(listItemElement)}else{var selectedListItemElements=util_2.toArray(listNode.querySelectorAll("li")).filter(function(listItemElement){return range.intersectsNode(listItemElement)}),lastSelectedListItemElement=selectedListItemElements[selectedListItemElements.length-1],listItemElementsAfterSelection=nodeHelpers.nextSiblings(lastSelectedListItemElement);splitList(listItemElementsAfterSelection),selection.placeMarkers();var documentFragment=document.createDocumentFragment();selectedListItemElements.forEach(function(listItemElement){var pElement=document.createElement("p");pElement.innerHTML=listItemElement.innerHTML,documentFragment.appendChild(pElement)}),listNode.parentNode.insertBefore(documentFragment,listNode.nextElementSibling),selectedListItemElements.forEach(function(listItemElement){listItemElement.parentNode.removeChild(listItemElement)})}0===listNode.childNodes.length&&listNode.parentNode.removeChild(listNode),selection.selectMarkers()})}else _super.prototype.execute.call(this,value)},InsertListCommand.prototype.queryEnabled=function(){return _super.prototype.queryEnabled.call(this)&&this.scribe.allowsBlockElements()},InsertListCommand}(command_2.Command);return function(scribe){scribe.commands.insertOrderedList=new InsertListCommand(scribe,"insertOrderedList"),scribe.commands.insertUnorderedList=new InsertListCommand(scribe,"insertUnorderedList")}}),define("scribe/plugins/core/commands/outdent",["require","exports","scribe/api/command"],function(require,exports,command_3){"use strict";var OutdentCommand=function(_super){function OutdentCommand(scribe){_super.call(this,scribe,"outdent")}return __extends(OutdentCommand,_super),OutdentCommand.prototype.queryEnabled=function(){var selection=new this.scribe.api.Selection,listElement=selection.getContaining(function(element){return"UL"===element.nodeName||"OL"===element.nodeName});return _super.prototype.queryEnabled.call(this)&&this.scribe.allowsBlockElements()&&!listElement},OutdentCommand}(command_3.Command);return function(scribe){scribe.commands.outdent=new OutdentCommand(scribe)}}),define("scribe/keystrokes",["require","exports"],function(require,exports){"use strict";function isUndoKeyCombination(event){return!event.shiftKey&&(event.metaKey||event.ctrlKey&&!event.altKey)&&event.keyCode===Z_KEY}function isRedoKeyCombination(event){return event.shiftKey&&(event.metaKey||event.ctrlKey&&!event.altKey)&&event.keyCode===Z_KEY}var Z_KEY=90;exports.isUndoKeyCombination=isUndoKeyCombination,exports.isRedoKeyCombination=isRedoKeyCombination}),define("scribe/plugins/core/commands/redo",["require","exports","scribe/api/command","scribe/keystrokes"],function(require,exports,command_4,keystrokes_1){"use strict";var RedoCommand=function(_super){function RedoCommand(scribe){var _this=this;_super.call(this,scribe,"redo"),scribe.options.undo.enabled&&scribe.el.addEventListener("keydown",function(event){keystrokes_1.isRedoKeyCombination(event)&&(event.preventDefault(),_this.execute())})}return __extends(RedoCommand,_super),RedoCommand.prototype.execute=function(){this.scribe.undoManager.redo()},RedoCommand.prototype.queryEnabled=function(){return this.scribe.undoManager.position>0},RedoCommand}(command_4.Command);return function(scribe){scribe.commands.redo=new RedoCommand(scribe)}}),define("scribe/plugins/core/commands/subscript",["require","exports"],function(require,exports){"use strict";return function(scribe){scribe.commands.subscript=new scribe.api.Command("subscript")}}),define("scribe/plugins/core/commands/superscript",["require","exports"],function(require,exports){"use strict";return function(scribe){scribe.commands.superscript=new scribe.api.Command("superscript")}}),define("scribe/plugins/core/commands/undo",["require","exports","scribe/api/command","scribe/keystrokes"],function(require,exports,command_5,keystrokes_2){"use strict";var UndoCommand=function(_super){function UndoCommand(scribe){var _this=this;_super.call(this,scribe,"undo"),scribe.options.undo.enabled&&scribe.el.addEventListener("keydown",function(event){keystrokes_2.isUndoKeyCombination(event)&&(event.preventDefault(),_this.execute())})}return __extends(UndoCommand,_super),UndoCommand.prototype.execute=function(){this.scribe.undoManager.undo()},UndoCommand.prototype.queryEnabled=function(){return this.scribe.undoManager.position<this.scribe.undoManager.length},UndoCommand}(command_5.Command);return function(scribe){scribe.commands.undo=new UndoCommand(scribe)}}),define("scribe/plugins/core/commands",["require","exports","scribe/plugins/core/commands/indent","scribe/plugins/core/commands/insert-list","scribe/plugins/core/commands/outdent","scribe/plugins/core/commands/redo","scribe/plugins/core/commands/subscript","scribe/plugins/core/commands/superscript","scribe/plugins/core/commands/undo"],function(require,exports,indent,insertList,outdent,redo,subscript,superscript,undo){"use strict";exports.indent=indent,exports.insertList=insertList,exports.outdent=outdent,exports.redo=redo,exports.subscript=subscript,exports.superscript=superscript,exports.undo=undo}),define("scribe/plugins/core/formatters/html/replace-nbsp-chars",["require","exports"],function(require,exports){"use strict";return function(scribe){var nbspCharRegExp=/(\s|&nbsp;)+/g;scribe.registerHTMLFormatter("export",function(html){return html.replace(nbspCharRegExp," ")})}}),define("scribe/plugins/core/formatters/plain-text/escape-html-characters",["require","exports"],function(require,exports){"use strict";function escape(char){return HTML_ESCAPES[char]}function escapeHTML(text){return(null==text?"":""+text).replace(REGEX,escape)}var HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},REGEX=new RegExp("(?:&|<|>|\"|'|`)","g");return function(scribe){scribe.registerPlainTextFormatter(escapeHTML)}}),define("scribe/plugins/core/formatters",["require","exports","scribe/plugins/core/formatters/html/replace-nbsp-chars","scribe/plugins/core/formatters/plain-text/escape-html-characters"],function(require,exports,replaceNbspCharsFormatter,escapeHtmlCharactersFormatter){"use strict";exports.replaceNbspCharsFormatter=replaceNbspCharsFormatter,exports.escapeHtmlCharactersFormatter=escapeHtmlCharactersFormatter}),define("scribe/mutations",["require","exports"],function(require,exports){"use strict";function determineMutationObserver(window){return"undefined"!=typeof MutationObserver?MutationObserver:"undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:"undefined"!=typeof MozMutationObserver?MozMutationObserver:MockObserver}var MockObserver=function(){function MockObserver(callback){}return MockObserver.prototype.disconnect=function(){},MockObserver.prototype.observe=function(target,options){},MockObserver.prototype.takeRecords=function(){return[]},MockObserver}();exports.determineMutationObserver=determineMutationObserver}),define("scribe/dom-observer",["require","exports","scribe/node","scribe/mutations","scribe/util"],function(require,exports,node_1,mutations_1,util_3){"use strict";function hasRealMutation(node){return!node_1.isEmptyTextNode(node)&&!node_1.isSelectionMarkerNode(node)}function includeRealMutations(mutations){return mutations.some(function(mutation){return util_3.some(mutation.addedNodes,hasRealMutation)||util_3.some(mutation.removedNodes,hasRealMutation)})}var maybeWindow="object"==typeof window?window:void 0,MutationObserver=mutations_1.determineMutationObserver(maybeWindow);return function(el,callback){var runningPostMutation=!1,observer=new MutationObserver(function(mutations){if(!runningPostMutation&&includeRealMutations(mutations)){runningPostMutation=!0;try{callback()}catch(e){throw e}finally{setTimeout(function(){runningPostMutation=!1},0)}}});return observer.observe(el,{childList:!0,subtree:!0}),observer}}),define("scribe/plugins/core/events",["require","exports","scribe/dom-observer","scribe/node","scribe/util"],function(require,exports,observeDomChanges,nodeHelpers,util_4){"use strict";var ENTER=13,BACKSPACE=8;return function(scribe){function applyFormatters(){if(!scribe._skipFormatters){var selection=new scribe.api.Selection,isEditorActive=selection.range,runFormatters=function(){isEditorActive&&selection.placeMarkers(),scribe.setHTML(scribe.format(scribe.getHTML())),selection.selectMarkers()};scribe.transactionManager.run(runFormatters)}delete scribe._skipFormatters}scribe.el.addEventListener("focus",function(){var selection=new scribe.api.Selection;if(selection.range){var isFirefoxBug=scribe.allowsBlockElements()&&selection.range.startContainer===scribe.el;if(isFirefoxBug){var focusElement=nodeHelpers.firstDeepestChild(scribe.el),range=selection.range;range.setStart(focusElement,0),range.setEnd(focusElement,0),selection.selection.removeAllRanges(),selection.selection.addRange(range)}}}),observeDomChanges(scribe.el,applyFormatters),scribe.allowsBlockElements()&&scribe.el.addEventListener("keydown",function(event){if(event.keyCode===ENTER){var selection=new scribe.api.Selection,range=selection.range,headingNode=selection.getContaining(function(node){return/^(H[1-6])$/.test(node.nodeName)});if(headingNode&&range.collapsed){var contentToEndRange=range.cloneRange();contentToEndRange.setEndAfter(headingNode);var contentToEndFragment=contentToEndRange.cloneContents();""===contentToEndFragment.firstChild.textContent&&(event.preventDefault(),scribe.transactionManager.run(function(){var pNode=document.createElement("p"),brNode=document.createElement("br");pNode.appendChild(brNode),headingNode.parentNode.insertBefore(pNode,headingNode.nextElementSibling),range.setStart(pNode,0),range.setEnd(pNode,0),selection.selection.removeAllRanges(),selection.selection.addRange(range)}))}}}),scribe.allowsBlockElements()&&scribe.el.addEventListener("keydown",function(event){if(event.keyCode===ENTER||event.keyCode===BACKSPACE){var selection=new scribe.api.Selection,range=selection.range;if(range.collapsed){var containerLIElement=selection.getContaining(function(node){return"LI"===node.nodeName});if(containerLIElement&&""===containerLIElement.textContent.trim()){event.preventDefault();var listNode=selection.getContaining(function(node){return"UL"===node.nodeName||"OL"===node.nodeName}),command=scribe.getCommand("OL"===listNode.nodeName?"insertOrderedList":"insertUnorderedList");command.event=event,command.execute()}}}}),scribe.el.addEventListener("paste",function(event){if(event.clipboardData&&event.clipboardData.types.length>0)event.preventDefault(),-1!==util_4.toArray(event.clipboardData.types).indexOf("text/html")?scribe.insertHTML(event.clipboardData.getData("text/html")):scribe.insertPlainText(event.clipboardData.getData("text/plain"));else{var selection=new scribe.api.Selection;selection.placeMarkers();var bin=document.createElement("div");document.body.appendChild(bin),bin.setAttribute("contenteditable","true"),bin.focus(),setTimeout(function(){var data=bin.innerHTML;bin.parentNode.removeChild(bin),selection.selectMarkers(),scribe.el.focus(),scribe.insertHTML(data)},1)}})}}),define("scribe/events",["require","exports"],function(require,exports){"use strict";exports.contentChanged="scribe:content-changed",exports.legacyContentChanged="content-changed",exports.destroy="scribe:destroy"}),define("scribe/plugins/core/patches/commands/bold",["require","exports","scribe/api/command-patch"],function(require,exports,command_patch_1){"use strict";var BoldCommand=function(_super){function BoldCommand(scribe){_super.call(this,scribe,"bold")}return __extends(BoldCommand,_super),BoldCommand.prototype.queryEnabled=function(){var selection=new this.scribe.api.Selection,headingNode=selection.getContaining(function(node){return/^(H[1-6])$/.test(node.nodeName)});return _super.prototype.queryEnabled.call(this)&&!headingNode},BoldCommand}(command_patch_1.CommandPatch);return function(scribe){scribe.commandPatches.bold=new BoldCommand(scribe)}}),define("scribe/plugins/core/patches/commands/indent",["require","exports","scribe/api/command-patch"],function(require,exports,command_patch_2){"use strict";var INVISIBLE_CHAR="\ufeff",IndentCommand=function(_super){function IndentCommand(scribe){_super.call(this,scribe,"indent")}return __extends(IndentCommand,_super),IndentCommand.prototype.execute=function(value){var _this=this;this.scribe.transactionManager.run(function(){var selection=new _this.scribe.api.Selection,range=selection.range,ancestor=range.commonAncestorContainer,isCaretOnNewLine="P"===ancestor.nodeName&&"<br>"===ancestor.innerHTML;if(isCaretOnNewLine){var textNode=document.createTextNode(INVISIBLE_CHAR);range.insertNode(textNode),range.setStart(textNode,0),range.setEnd(textNode,0),selection.selection.removeAllRanges(),selection.selection.addRange(range)}_super.prototype.execute.call(_this,value),selection=new _this.scribe.api.Selection;var blockquoteNode=selection.getContaining(function(node){return"BLOCKQUOTE"===node.nodeName});blockquoteNode&&blockquoteNode.removeAttribute("style")})},IndentCommand}(command_patch_2.CommandPatch);return function(scribe){scribe.commandPatches.indent=new IndentCommand(scribe)}}),define("scribe/plugins/core/patches/commands/insert-html",["require","exports","scribe/api/command-patch","scribe/node"],function(require,exports,command_patch_3,nodeHelpers){"use strict";var InsertHTMLCommand=function(_super){function InsertHTMLCommand(scribe){_super.call(this,scribe,"insertHTML")}return __extends(InsertHTMLCommand,_super),InsertHTMLCommand.prototype.execute=function(value){var _this=this;this.scribe.transactionManager.run(function(){_super.prototype.execute.call(_this,value),nodeHelpers.removeChromeArtifacts(_this.scribe.el)})},InsertHTMLCommand}(command_patch_3.CommandPatch);return function(scribe){scribe.commandPatches.insertHTML=new InsertHTMLCommand(scribe)}}),define("scribe/plugins/core/patches/commands/insert-list",["require","exports","scribe/api/command-patch","scribe/node"],function(require,exports,command_patch_4,nodeHelpers){"use strict";var InsertListCommandPatch=function(_super){function InsertListCommandPatch(scribe,commandName){_super.call(this,scribe,commandName)}return __extends(InsertListCommandPatch,_super),InsertListCommandPatch.prototype.execute=function(value){var _this=this;this.scribe.transactionManager.run(function(){if(_super.prototype.execute.call(_this,value),_this.queryState()){var selection=new _this.scribe.api.Selection,listElement=selection.getContaining(function(node){return"OL"===node.nodeName||"UL"===node.nodeName});if(listElement.nextElementSibling&&0===listElement.nextElementSibling.childNodes.length&&nodeHelpers.removeNode(listElement.nextElementSibling),listElement){var listParentNode=listElement.parentNode;listParentNode&&/^(H[1-6]|P)$/.test(listParentNode.nodeName)&&(selection.placeMarkers(),nodeHelpers.insertAfter(listElement,listParentNode),selection.selectMarkers(),2===listParentNode.childNodes.length&&nodeHelpers.isEmptyTextNode(listParentNode.firstChild)&&nodeHelpers.removeNode(listParentNode),0===listParentNode.childNodes.length&&nodeHelpers.removeNode(listParentNode))}nodeHelpers.removeChromeArtifacts(listElement)}})},InsertListCommandPatch.prototype.queryState=function(){try{return _super.prototype.queryState.call(this)}catch(err){if("NS_ERROR_UNEXPECTED"==err.name)return!1;throw err}},InsertListCommandPatch}(command_patch_4.CommandPatch);return function(scribe){scribe.commandPatches.insertOrderedList=new InsertListCommandPatch(scribe,"insertOrderedList"),scribe.commandPatches.insertUnorderedList=new InsertListCommandPatch(scribe,"insertUnorderedList")}}),define("scribe/plugins/core/patches/commands/outdent",["require","exports","scribe/api/command-patch","scribe/node"],function(require,exports,command_patch_5,nodeHelpers){"use strict";var OutdentCommand=function(_super){function OutdentCommand(scribe){_super.call(this,scribe,"outdent")}return __extends(OutdentCommand,_super),OutdentCommand.prototype.execute=function(){var _this=this;this.scribe.transactionManager.run(function(){var selection=new _this.scribe.api.Selection,range=selection.range,blockquoteNode=selection.getContaining(function(node){return"BLOCKQUOTE"===node.nodeName});if("BLOCKQUOTE"===range.commonAncestorContainer.nodeName){selection.placeMarkers(),selection.selectMarkers(!0);var selectedNodes=range.cloneContents();blockquoteNode.parentNode.insertBefore(selectedNodes,blockquoteNode),range.deleteContents(),selection.selectMarkers(),""===blockquoteNode.textContent&&blockquoteNode.parentNode.removeChild(blockquoteNode)}else{var pNode=selection.getContaining(function(node){return"P"===node.nodeName});if(pNode){var nextSiblingNodes=nodeHelpers.nextSiblings(pNode);if(nextSiblingNodes.length){for(var newContainerNode=document.createElement(blockquoteNode.nodeName);nextSiblingNodes.length;)newContainerNode.appendChild(nextSiblingNodes[0]),nextSiblingNodes.shift();blockquoteNode.parentNode.insertBefore(newContainerNode,blockquoteNode.nextElementSibling)}selection.placeMarkers(),blockquoteNode.parentNode.insertBefore(pNode,blockquoteNode.nextElementSibling),selection.selectMarkers(),""===blockquoteNode.innerHTML&&blockquoteNode.parentNode.removeChild(blockquoteNode)}else _super.prototype.execute.call(_this)}})},OutdentCommand}(command_patch_5.CommandPatch);return function(scribe){scribe.commandPatches.outdent=new OutdentCommand(scribe)}}),define("scribe/plugins/core/patches/commands/create-link",["require","exports","scribe/api/command-patch"],function(require,exports,command_patch_6){"use strict";var CreateLinkCommand=function(_super){function CreateLinkCommand(scribe){_super.call(this,scribe,"createLink")}return __extends(CreateLinkCommand,_super),CreateLinkCommand.prototype.execute=function(value){var selection=new this.scribe.api.Selection;if(selection.range.collapsed){var aElement=document.createElement("a");aElement.setAttribute("href",value),aElement.textContent=value,selection.range.insertNode(aElement);var newRange=document.createRange();newRange.setStartBefore(aElement),newRange.setEndAfter(aElement),selection.selection.removeAllRanges(),selection.selection.addRange(newRange)}else _super.prototype.execute.call(this,value)},CreateLinkCommand}(command_patch_6.CommandPatch);return function(scribe){scribe.commandPatches.createLink=new CreateLinkCommand(scribe)}}),define("scribe/plugins/core/patches/commands",["require","exports","scribe/plugins/core/patches/commands/bold","scribe/plugins/core/patches/commands/indent","scribe/plugins/core/patches/commands/insert-html","scribe/plugins/core/patches/commands/insert-list","scribe/plugins/core/patches/commands/outdent","scribe/plugins/core/patches/commands/create-link"],function(require,exports,bold,indent,insertHTML,insertList,outdent,createLink){
"use strict";exports.bold=bold,exports.indent=indent,exports.insertHTML=insertHTML,exports.insertList=insertList,exports.outdent=outdent,exports.createLink=createLink}),define("scribe/plugins/core/patches/events",["require","exports","scribe/node"],function(require,exports,nodeHelpers){"use strict";var BACKSPACE=8,DELETE=46;return function(scribe){scribe.allowsBlockElements()&&scribe.el.addEventListener("keyup",function(event){if(event.keyCode===BACKSPACE||event.keyCode===DELETE){var selection=new scribe.api.Selection,containerPElement=selection.getContaining(function(node){return"P"===node.nodeName});containerPElement&&scribe.transactionManager.run(function(){selection.placeMarkers(),nodeHelpers.removeChromeArtifacts(containerPElement),selection.selectMarkers()},!0)}})}}),define("scribe/plugins/core/patches",["require","exports","scribe/plugins/core/patches/commands","scribe/plugins/core/patches/events"],function(require,exports,commands,events){"use strict";exports.commands=commands,exports.events=events}),define("scribe/api/selection",["require","exports","scribe/node"],function(require,exports,nodeHelpers){"use strict";function createMarker(){var node=document.createElement("em");return node.style.display="none",node.classList.add("scribe-marker"),node}function insertMarker(range,marker){range.insertNode(marker),marker.nextSibling&&nodeHelpers.isEmptyTextNode(marker.nextSibling)&&nodeHelpers.removeNode(marker.nextSibling),marker.previousSibling&&nodeHelpers.isEmptyTextNode(marker.previousSibling)&&nodeHelpers.removeNode(marker.previousSibling)}var ScribeSelection=function(){function ScribeSelection(scribe){if(this.scribe=scribe,this.rootDoc=scribe.el.ownerDocument,this.rootDoc.compareDocumentPosition(scribe.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var currentElement=scribe.el.parentNode;currentElement&&nodeHelpers.isFragment(currentElement);)currentElement=currentElement.parentNode;currentElement&&currentElement.getSelection&&(this.rootDoc=currentElement)}if(this.selection=this.rootDoc.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var startNode=this.selection.anchorNode,startOffset=this.selection.anchorOffset,endNode=this.selection.focusNode,endOffset=this.selection.focusOffset;if(startNode===endNode&&startOffset>endOffset){var tmp=startOffset;startOffset=endOffset,endOffset=tmp}else if(nodeHelpers.isBefore(endNode,startNode)){var tmpNode=startNode,tmpOffset=startOffset;startNode=endNode,startOffset=endOffset,endNode=tmpNode,endOffset=tmpOffset}this.range=document.createRange(),this.range.setStart(startNode,startOffset),this.range.setEnd(endNode,endOffset)}}return ScribeSelection.prototype.getContaining=function(nodeFilter){var range=this.range;if(range){var node=this.range.commonAncestorContainer;return node&&this.scribe.el===node||!nodeFilter(node)?nodeHelpers.getAncestor(node,this.scribe.el,nodeFilter):node}},ScribeSelection.prototype.placeMarkers=function(){var range=this.range;if(range&&document.contains(this.scribe.el)&&this.scribe.el.contains(range.startContainer)&&this.scribe.el.contains(range.endContainer)){if(insertMarker(range.cloneRange(),createMarker()),!range.collapsed){var rangeEnd=range.cloneRange();rangeEnd.collapse(!1),insertMarker(rangeEnd,createMarker())}this.selection.removeAllRanges(),this.selection.addRange(range)}},ScribeSelection.prototype.getMarkers=function(){return this.scribe.el.querySelectorAll("em.scribe-marker")},ScribeSelection.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(marker){var markerParent=marker.parentNode;nodeHelpers.removeNode(marker),markerParent.normalize()})},ScribeSelection.prototype.selectMarkers=function(keepMarkers){var markers=this.getMarkers();if(markers.length){var newRange=document.createRange();newRange.setStartBefore(markers[0]),newRange.setEndAfter(markers.length>=2?markers[1]:markers[0]),keepMarkers||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(newRange)}},ScribeSelection.prototype.isCaretOnNewLine=function(){var containerPElement=this.getContaining(function(node){return"P"===node.nodeName});return!!containerPElement&&nodeHelpers.isEmptyInlineElement(containerPElement)},ScribeSelection}();exports.ScribeSelection=ScribeSelection}),define("scribe/api/simple-command",["require","exports","scribe/api/command"],function(require,exports,command_6){"use strict";var SimpleCommand=function(_super){function SimpleCommand(scribe,commandName,nodeName){_super.call(this,scribe,commandName),this._nodeName=nodeName}return __extends(SimpleCommand,_super),SimpleCommand.prototype.queryState=function(){var _this=this,selection=new this.scribe.api.Selection;return _super.prototype.queryState.call(this)&&!!selection.getContaining(function(node){return node.nodeName===_this._nodeName})},SimpleCommand}(command_6.Command);exports.SimpleCommand=SimpleCommand}),define("scribe/api",["require","exports","scribe/api/command-patch","scribe/api/command","scribe/api/selection","scribe/api/simple-command"],function(require,exports,command_patch_7,command_7,selection_1,simple_command_1){"use strict";var ScribeApi=function(){function ScribeApi(scribe){var _this=this;this.CommandPatch=function(commandName){return new command_patch_7.CommandPatch(_this.scribe,commandName)},this.Command=function(commandName){return new command_7.Command(_this.scribe,commandName)},this.Selection=function(){return new selection_1.ScribeSelection(_this.scribe)},this.SimpleCommand=function(commandName,nodeName){return new simple_command_1.SimpleCommand(_this.scribe,commandName,nodeName)},this.scribe=scribe}return ScribeApi}();exports.ScribeApi=ScribeApi}),define("scribe/transaction-manager",["require","exports","scribe/events"],function(require,exports,eventNames){"use strict";var TransactionManager=function(){function TransactionManager(scribe){this.history=[],this.scribe=scribe}return TransactionManager.prototype.start=function(){this.history.push(1)},TransactionManager.prototype.end=function(){this.history.pop(),0===this.history.length&&(this.scribe.pushHistory(),this.scribe.trigger(eventNames.legacyContentChanged),this.scribe.trigger(eventNames.contentChanged))},TransactionManager.prototype.run=function(transaction,forceMerge){this.start();try{transaction&&transaction()}finally{this.scribe._forceMerge=forceMerge===!0,this.end(),this.scribe._forceMerge=!1}},TransactionManager}();exports.TransactionManager=TransactionManager}),define("scribe/undo-manager",["require","exports"],function(require,exports){"use strict";var ScribeUndoManager=function(){function ScribeUndoManager(limit,undoScopeHost){this._stack=[],this._limit=limit,this._fireEvent="undefined"!=typeof CustomEvent&&null!=undoScopeHost&&null!=undoScopeHost.dispatchEvent,this._ush=undoScopeHost,this.position=0,this.length=0}return ScribeUndoManager.prototype.transact=function(transaction,merge){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");transaction.execute(),this.position>0&&this.clearRedo();var transactions;merge&&this.length?(this._stack[0].push(transaction),this._stack.shift(),this._stack.unshift(transactions)):(transactions=[transaction],this._stack.unshift(transactions),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",transactions)},ScribeUndoManager.prototype.undo=function(){if(!(this.position>=this.length)){for(var transactions=this._stack[this.position],i=transactions.length;i--;)transactions[i].undo();this.position++,this._dispatch("undo",transactions)}},ScribeUndoManager.prototype.redo=function(){if(0!==this.position){this.position--;for(var transactions=this._stack[this.position],i=0;i<transactions.length;i++)transactions[i].redo();this._dispatch("redo",transactions)}},ScribeUndoManager.prototype.item=function(index){return index>=0&&index<this.length?this._stack[index]:null},ScribeUndoManager.prototype.clearUndo=function(position){this._stack.length=void 0!==position?position:this.position,this.length=this._stack.length},ScribeUndoManager.prototype.clearRedo=function(){this._stack=this._stack.slice(this.position),this.length=this._stack.length,this.position=0},ScribeUndoManager.prototype._dispatch=function(event,transactions){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(event,{detail:{transactions:transactions},bubbles:!0,cancelable:!1}))},ScribeUndoManager}();exports.ScribeUndoManager=ScribeUndoManager}),define("scribe/event-emitter",["require","exports","scribe/util"],function(require,exports,util_5){"use strict";var EventEmitter=function(){function EventEmitter(){this._listeners={}}return EventEmitter.prototype.on=function(name,listener){this._listeners[name]||(this._listeners[name]=[]),this._listeners[name].push(listener)},EventEmitter.prototype.off=function(name,listener){listener?util_5.removeValue(this._listeners[name],listener):this._listeners[name]=[]},EventEmitter.prototype.trigger=function(name,args){void 0===args&&(args=[]);for(var events=name.split(":");events.length>0;){var current=events.join(":"),listeners=this._listeners[current];listeners&&listeners.forEach(function(listener){return listener.apply(null,args)}),events.pop()}},EventEmitter}();exports.EventEmitter=EventEmitter}),define("scribe/config",["require","exports","scribe/util"],function(require,exports,util_6){"use strict";function checkOptions(userSuppliedOptions){var options=userSuppliedOptions||{};return options.defaultPlugins&&(options.defaultPlugins=options.defaultPlugins.filter(filterByPluginExists(defaultOptions.defaultPlugins))),options.defaultFormatters&&(options.defaultFormatters=options.defaultFormatters.filter(filterByPluginExists(defaultOptions.defaultFormatters))),Object.freeze(util_6.merge(defaultOptions,options))}function sortByPlugin(priorityPlugin){return function(pluginCurrent,pluginNext){return pluginCurrent===priorityPlugin?-1:pluginNext===priorityPlugin?1:0}}function filterByBlockLevelMode(isBlockLevelMode){return function(plugin){return-1!==(isBlockLevelMode?blockModePlugins:inlineModePlugins).indexOf(plugin)}}function filterByPluginExists(pluginList){return function(plugin){return-1!==pluginList.indexOf(plugin)}}var blockModePlugins=["setRootPElement","enforcePElements","ensureSelectableContainers"],inlineModePlugins=["inlineElementsMode"],defaultOptions={allowBlockElements:!0,debug:!1,undo:{manager:null,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:blockModePlugins.concat(inlineModePlugins),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};exports.checkOptions=checkOptions,exports.sortByPlugin=sortByPlugin,exports.filterByBlockLevelMode=filterByBlockLevelMode,exports.filterByPluginExists=filterByPluginExists}),define("scribe",["require","exports","scribe/plugins/core/plugins","scribe/plugins/core/commands","scribe/plugins/core/formatters","scribe/plugins/core/events","scribe/events","scribe/plugins/core/patches","scribe/api","scribe/transaction-manager","scribe/undo-manager","scribe/event-emitter","scribe/node","scribe/config"],function(require,exports,plugins,commands,formatters,events,eventNames,patches,api_1,transaction_manager_1,undo_manager_1,event_emitter_1,nodeHelpers,config){"use strict";var FilterList=function(){function FilterList(){this.filters=[]}return FilterList.prototype.filter=function(content){return this.filters.reduce(function(formattedData,formatter){return formatter(formattedData)},content)},FilterList.prototype.add=function(filter){this.filters.push(filter)},FilterList}();exports.FilterList=FilterList;var Scribe=function(_super){function Scribe(el,options){var _this=this;_super.call(this),this._mergeTimer=0,this._lastItem={content:""},this.filters={text:new FilterList,sanitize:new FilterList,normalize:new FilterList,"export":new FilterList},this.options=config.checkOptions(options),this.el=el,this.commands={},this.commandPatches={},this.api=new api_1.ScribeApi(this),this.transactionManager=new transaction_manager_1.TransactionManager(this);var options=this.options;options.undo.enabled&&(options.undo.manager?this.undoManager=options.undo.manager:this.undoManager=new undo_manager_1.ScribeUndoManager(options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable","true"),this.el.addEventListener("input",function(){_this.transactionManager.run()},!1);var corePlugins=options.defaultPlugins.filter(config.filterByBlockLevelMode(this.allowsBlockElements())).sort(config.sortByPlugin("setRootPElement")).map(function(plugin){return plugins[plugin]}),defaultFormatters=options.defaultFormatters.filter(function(formatter){return!!formatters[formatter]}).map(function(formatter){return formatters[formatter]}),defaultPatches=[patches.events],defaultCommandPatches=options.defaultCommandPatches.map(function(patch){return patches.commands[patch]}),defaultCommands=["indent","insertList","outdent","redo","subscript","superscript","undo"].map(function(command){return commands[command]}),allPlugins=[].concat(corePlugins,defaultFormatters,defaultPatches,defaultCommandPatches,defaultCommands);allPlugins.forEach(function(plugin){return _this.use(plugin)}),this.use(events)}return __extends(Scribe,_super),Scribe.prototype.use=function(configurePlugin){return configurePlugin(this),this},Scribe.prototype.setHTML=function(html,skipFormatters){void 0===skipFormatters&&(skipFormatters=!1),this.options.undo.enabled&&(this._lastItem.content=html),skipFormatters&&(this._skipFormatters=!0),this.el.innerHTML!==html&&(this.el.innerHTML=html)},Scribe.prototype.getHTML=function(){return this.el.innerHTML},Scribe.prototype.getContent=function(){return this.formatForExport(this.getHTML().replace(/<br>$/,""))},Scribe.prototype.getTextContent=function(){return this.el.textContent},Scribe.prototype.pushHistory=function(){var _this=this;if(this.options.undo.enabled){var lastContentNoMarkers=this._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(this.getHTML()!==lastContentNoMarkers){var selection=new this.api.Selection;selection.placeMarkers();var content=this.getHTML();selection.removeMarkers();var previousItem=this.undoManager.item(this.undoManager.position);return(this._merge||this._forceMerge)&&previousItem&&this._lastItem==previousItem[0]?this._lastItem.content=content:(this._lastItem={previousItem:this._lastItem,content:content,scribe:this,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},this.undoManager.transact(this._lastItem,!1)),clearTimeout(this._mergeTimer),this._merge=!0,this._mergeTimer=setTimeout(function(){_this._merge=!1},this.options.undo.interval),!0}}return!1},Scribe.prototype.getCommand=function(commandName){return this.commands[commandName]||this.commandPatches[commandName]||new this.api.Command(commandName)},Scribe.prototype.restoreFromHistory=function(historyItem){this._lastItem=historyItem,this.setHTML(historyItem.content,!0);var selection=new this.api.Selection;selection.selectMarkers(),this.trigger(eventNames.legacyContentChanged),this.trigger(eventNames.contentChanged)},Scribe.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},Scribe.prototype.setContent=function(content){this.allowsBlockElements()||(content+="<br>"),this.setHTML(content),this.trigger(eventNames.legacyContentChanged),this.trigger(eventNames.contentChanged)},Scribe.prototype.insertPlainText=function(plainText){this.insertHTML("<p>"+this.formatForExport(plainText)+"</p>")},Scribe.prototype.insertHTML=function(html){this.getCommand("insertHTML").execute(this.format(html))},Scribe.prototype.isDebugModeEnabled=function(){return this.options.debug},Scribe.prototype.registerHTMLFormatter=function(phase,formatter){this.filters[phase].add(formatter)},Scribe.prototype.registerPlainTextFormatter=function(formatter){this.filters.text.add(formatter)},Scribe.prototype.format=function(html){return this.filters.normalize.filter(this.filters.sanitize.filter(html))},Scribe.prototype.formatForExport=function(html){return this.filters.text.filter(html)},Scribe.prototype.destroy=function(){this.trigger(eventNames.destroy)},Scribe.node=nodeHelpers,Scribe.element=Scribe.node,Scribe}(event_emitter_1.EventEmitter);exports.Scribe=Scribe});
//# sourceMappingURL=dist/scribe.min.js.map